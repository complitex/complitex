<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.complitex.osznconnection.file.service.privilege.DebtBean">
    <resultMap id="facilityLocalResultMap" type="org.complitex.osznconnection.file.entity.privilege.Debt"
               extends="org.complitex.osznconnection.file.service.AbstractRequestBean.abstractRequest">
        <id column="id" property="id"/>

        <result column="internal_city_id" property="cityId"/>
        <result column="internal_street_id" property="streetId"/>
        <result column="internal_street_type_id" property="streetTypeId"/>
        <result column="internal_building_id" property="buildingId"/>

        <result column="outgoing_city" property="outgoingCity"/>
        <result column="outgoing_district" property="outgoingDistrict"/>
        <result column="outgoing_street" property="outgoingStreet"/>
        <result column="outgoing_street_type" property="outgoingStreetType"/>
        <result column="outgoing_building_number" property="outgoingBuildingNumber"/>
        <result column="outgoing_building_corp" property="outgoingBuildingCorp"/>
        <result column="outgoing_apartment" property="outgoingApartment"/>

        <result column="date" property="date"/>

        <result column="last_name_cyr" property="lastName"/>
        <result column="first_name_cyr" property="firstName"/>
        <result column="middle_name_cyr" property="middleName"/>

        <result column="city" property="city"/>

        <association property="dbfFields" javaType="map">
            <result column="COD" property="COD"/>
            <result column="CDPR" property="CDPR"/>
            <result column="NCARD" property="NCARD"/>
            <result column="IDPIL" property="IDPIL"/>
            <result column="PASPPIL" property="PASPPIL"/>
            <result column="FIOPIL" property="FIOPIL"/>
            <result column="INDEX" property="INDEX"/>
            <result column="CDUL" property="CDUL"/>
            <result column="HOUSE" property="HOUSE"/>
            <result column="BUILD" property="BUILD"/>
            <result column="APT" property="APT"/>
            <result column="KAT" property="KAT"/>
            <result column="LGCODE" property="LGCODE"/>
            <result column="DATEIN" property="DATEIN"/>
            <result column="DATEOUT" property="DATEOUT"/>
            <result column="MONTHZV" property="MONTHZV"/>
            <result column="YEARZV" property="YEARZV"/>
            <result column="RAH" property="RAH"/>
            <result column="MONEY" property="MONEY"/>
            <result column="EBK" property="EBK"/>
            <result column="SUM_BORG" property="SUM_BORG"/>
        </association>
    </resultMap>

    <insert id="insertDebtList" parameterType="list">
        <include refid="org.complitex.osznconnection.file.service.privilege.AbstractPrivilegeBean.insertPrivilege">
            <property name="table" value="debt"/>
        </include>
    </insert>

    <select id="selectDebt" resultMap="facilityLocalResultMap" parameterType="long">
        select * from `debt` where `request_file_id` = #{id}
    </select>

    <select id="selectDebtList" resultMap="facilityLocalResultMap" parameterType="org.complitex.common.entity.FilterWrapper">
        select * from `debt` where `request_file_id` = #{object.requestFileId} ${limit}
    </select>

    <select id="selectDebtListCount" resultType="long" parameterType="org.complitex.common.entity.FilterWrapper">
        select count(id) from `debt` where `request_file_id` = #{object.requestFileId}
    </select>

    <delete id="deleteDebt" parameterType="long">
        delete from `debt` where `request_file_id` = #{id}
    </delete>
</mapper>
